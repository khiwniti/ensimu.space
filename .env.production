# Production Environment Configuration for ensimu-space
# Generated from .env.production.example - UPDATE WITH ACTUAL PRODUCTION VALUES

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=ensimu_space
POSTGRES_USER=ensimu_user
POSTGRES_PASSWORD=CHANGE_ME_SECURE_POSTGRES_PASSWORD_32_CHARS
POSTGRES_REPLICATION_PASSWORD=CHANGE_ME_REPLICATION_PASSWORD_32_CHARS

# Full database URL (constructed from above or set directly)
DATABASE_URL=postgresql://ensimu_user:CHANGE_ME_SECURE_POSTGRES_PASSWORD_32_CHARS@postgres:5432/ensimu_space

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=CHANGE_ME_SECURE_REDIS_PASSWORD_32_CHARS
REDIS_URL=redis://:CHANGE_ME_SECURE_REDIS_PASSWORD_32_CHARS@redis:6379/0

# =============================================================================
# APPLICATION SECURITY
# =============================================================================
SECRET_KEY=CHANGE_ME_SECRET_KEY_MINIMUM_32_CHARACTERS_LONG
JWT_SECRET=CHANGE_ME_JWT_SECRET_MINIMUM_32_CHARACTERS_LONG

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com

# CORS origins (comma-separated)
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# OpenAI API Key for AI agents
OPENAI_API_KEY=CHANGE_ME_YOUR_OPENAI_API_KEY_HERE

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Grafana admin password
GRAFANA_PASSWORD=CHANGE_ME_SECURE_GRAFANA_PASSWORD_32_CHARS

# Enable metrics collection
ENABLE_METRICS=true
METRICS_PORT=8001

# Health check interval in seconds
HEALTH_CHECK_INTERVAL=30

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Backend workers (default: auto-calculated based on CPU cores)
BACKEND_WORKERS=4

# Database connection pool
MAX_DB_CONNECTIONS=20

# Cache TTL in seconds
CACHE_TTL=3600

# Maximum concurrent workflows
MAX_CONCURRENT_WORKFLOWS=10

# Workflow timeout in seconds
WORKFLOW_TIMEOUT=3600

# Maximum file upload size
MAX_FILE_SIZE=100MB

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# API URLs for frontend
FRONTEND_API_URL=https://your-domain.com/api
FRONTEND_WS_URL=wss://your-domain.com/ws

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================
# Docker Swarm or Kubernetes scaling
REPLICAS_BACKEND=2
REPLICAS_FRONTEND=2
REPLICAS_REDIS=1
REPLICAS_POSTGRES=1

# Resource limits
BACKEND_MEMORY_LIMIT=4G
BACKEND_CPU_LIMIT=2.0
FRONTEND_MEMORY_LIMIT=512M
FRONTEND_CPU_LIMIT=0.5
POSTGRES_MEMORY_LIMIT=2G
POSTGRES_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=0.5

# Auto-scaling configuration
BACKEND_MIN_REPLICAS=2
BACKEND_MAX_REPLICAS=10
FRONTEND_MIN_REPLICAS=2
FRONTEND_MAX_REPLICAS=6
CELERY_MIN_REPLICAS=2
CELERY_MAX_REPLICAS=8

SCALE_UP_THRESHOLD_CPU=70
SCALE_UP_THRESHOLD_MEMORY=80
SCALE_DOWN_THRESHOLD_CPU=30
SCALE_DOWN_THRESHOLD_MEMORY=40

SCALE_UP_COOLDOWN=300
SCALE_DOWN_COOLDOWN=600
MONITORING_INTERVAL=60

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=ensimu-production-backups
BACKUP_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_ME_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_ME_AWS_SECRET_KEY

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USER=noreply@your-domain.com
SMTP_PASSWORD=CHANGE_ME_EMAIL_PASSWORD
SMTP_FROM=noreply@your-domain.com

# =============================================================================
# SECURITY HARDENING
# =============================================================================
ENABLE_SECURITY_HEADERS=true
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_STYLE_SRC='self' 'unsafe-inline'

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_WORKFLOW_CACHING=true
ENABLE_AGENT_METRICS=true
ENABLE_HITL_CHECKPOINTS=true
ENABLE_FILE_COMPRESSION=true
ENABLE_RATE_LIMITING=true

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
DB_QUERY_TIMEOUT=30
CACHE_MEMORY_LIMIT=512
WORKER_MEMORY_LIMIT=1024
MAX_REQUEST_SIZE=50
SESSION_TIMEOUT=3600
API_RATE_LIMIT=1000
WS_CONNECTION_LIMIT=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_FORMAT=json
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10

# =============================================================================
# PROMETHEUS CONFIGURATION
# =============================================================================
PROMETHEUS_URL=http://prometheus:9090

# =============================================================================
# PRODUCTION ENVIRONMENT
# =============================================================================
ENVIRONMENT=production
DEBUG=false
MAINTENANCE_MODE=false