# Production Environment Configuration for ensimu-space
# Copy this file to .env.production and fill in the actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=ensimu_space
POSTGRES_USER=ensimu_user
POSTGRES_PASSWORD=your_secure_postgres_password_here

# Full database URL (constructed from above or set directly)
DATABASE_URL=postgresql://ensimu_user:your_secure_postgres_password_here@postgres:5432/ensimu_space

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_URL=redis://:your_secure_redis_password_here@redis:6379/0

# =============================================================================
# APPLICATION SECURITY
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your_secret_key_here_32_chars_minimum
JWT_SECRET=your_jwt_secret_here_32_chars_minimum

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com

# CORS origins (comma-separated)
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# OpenAI API Key for AI agents
OPENAI_API_KEY=sk-your_openai_api_key_here

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Backend workers (default: auto-calculated based on CPU cores)
BACKEND_WORKERS=4

# Database connection pool
MAX_DB_CONNECTIONS=20

# Cache TTL in seconds
CACHE_TTL=3600

# Maximum concurrent workflows
MAX_CONCURRENT_WORKFLOWS=10

# Workflow timeout in seconds
WORKFLOW_TIMEOUT=3600

# Maximum file upload size
MAX_FILE_SIZE=100MB

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Grafana admin password
GRAFANA_PASSWORD=your_secure_grafana_password_here

# Enable metrics collection
ENABLE_METRICS=true
METRICS_PORT=8001

# Health check interval in seconds
HEALTH_CHECK_INTERVAL=30

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# API URLs for frontend
FRONTEND_API_URL=https://your-domain.com/api
FRONTEND_WS_URL=wss://your-domain.com/ws

# =============================================================================
# SSL/TLS CONFIGURATION (if using HTTPS)
# =============================================================================
# SSL certificate paths (uncomment if using SSL)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Database backup settings
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# =============================================================================
# EMAIL CONFIGURATION (for notifications)
# =============================================================================
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USER=your-email@your-domain.com
SMTP_PASSWORD=your_email_password
SMTP_FROM=noreply@your-domain.com

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================
# Docker Swarm or Kubernetes scaling
REPLICAS_BACKEND=2
REPLICAS_FRONTEND=2
REPLICAS_REDIS=1
REPLICAS_POSTGRES=1

# Resource limits
BACKEND_MEMORY_LIMIT=4G
BACKEND_CPU_LIMIT=2.0
FRONTEND_MEMORY_LIMIT=512M
FRONTEND_CPU_LIMIT=0.5
POSTGRES_MEMORY_LIMIT=2G
POSTGRES_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=0.5

# =============================================================================
# DEVELOPMENT/STAGING OVERRIDES
# =============================================================================
# Uncomment for staging environment
# ENVIRONMENT=staging
# DEBUG=true
# LOG_LEVEL=DEBUG

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
ENABLE_WORKFLOW_CACHING=true
ENABLE_AGENT_METRICS=true
ENABLE_HITL_CHECKPOINTS=true
ENABLE_FILE_COMPRESSION=true
ENABLE_RATE_LIMITING=true

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
# Database query timeout in seconds
DB_QUERY_TIMEOUT=30

# Cache memory limit in MB
CACHE_MEMORY_LIMIT=512

# Worker memory limit in MB
WORKER_MEMORY_LIMIT=1024

# Maximum request size in MB
MAX_REQUEST_SIZE=50

# Session timeout in seconds
SESSION_TIMEOUT=3600

# API rate limit (requests per minute)
API_RATE_LIMIT=1000

# WebSocket connection limit
WS_CONNECTION_LIMIT=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log format (json or text)
LOG_FORMAT=json

# Log rotation settings
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10

# Syslog configuration (optional)
ENABLE_SYSLOG=false
SYSLOG_HOST=localhost
SYSLOG_PORT=514

# =============================================================================
# SECURITY HARDENING
# =============================================================================
# Enable security headers
ENABLE_SECURITY_HEADERS=true

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_STYLE_SRC='self' 'unsafe-inline'

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# IP whitelist (comma-separated, optional)
# IP_WHITELIST=192.168.1.0/24,10.0.0.0/8

# =============================================================================
# MAINTENANCE MODE
# =============================================================================
# Enable maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."

# =============================================================================
# ANALYTICS AND TRACKING (optional)
# =============================================================================
# Google Analytics
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# Sentry error tracking
# SENTRY_DSN=https://your-sentry-dsn-here

# =============================================================================
# CUSTOM CONFIGURATION
# =============================================================================
# Add any custom environment variables here
# CUSTOM_SETTING=value
